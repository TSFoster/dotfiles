#!/usr/bin/env zsh
# Set MAC address. Takes between 0 and 6 arguments, each a 2-digit hexadecimal number
# Remaining bits are taken from original MAC address (set in $MAC in ~/.machine-private)
set -e

if [ "$OS" = Mac ]; then
  sudo airport -z
  sudo ifconfig en0 ether ${1-$MAC[1]}:${2-$MAC[2]}:${3-$MAC[3]}:${4-$MAC[4]}:${5-$MAC[5]}:${6-$MAC[6]}
  ifconfig en0 | \
    grep ether | \
    awk '{print "New MAC address:",$2}'
else
  echo "Don't know how to do it on this OS"
  exit 1
fi
