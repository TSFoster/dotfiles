#!/usr/bin/env zsh
session=''
sessionroot="$(git root 2>/dev/null)"
if [ -z "$sessionroot" ]; then sessionroot='.'; fi

if [ -n "$*" ]; then
  session="$sessionroot/$*.vim"
else
  if [ -s "$sessionroot/Session.vim" ]; then
    session="$sessionroot/Session.vim"
  elif [ -s "$sessionroot/.Session.vim" ]; then
    session="$sessionroot/.Session.vim"
  fi
fi

if [ -s "$session" ]; then
  vim -S "$session"
else
  vim +"Obsession $session"
fi
