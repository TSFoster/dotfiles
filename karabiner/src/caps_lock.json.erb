{
    "title": "Change caps lock key",
    "rules": [
        {
            "description": "Change caps lock key to 'hyper'. (Command + space when pressed alone)",
            "manipulators": [
                {
                    "type": "basic",
                    "from": <%= from("caps_lock", [], ("a".."z").to_a + ("0" .. "9").to_a) %>,
                    "to": <%= to([["left_shift", ["left_command", "left_control", "left_option"]]]) %>,
                    "to_if_alone": <%= to([["spacebar", ["left_command"]]]) %>
                }
            ]
        },
        {
            "description": "Change caps lock + modifier to 'hyper' - modifier (modifier + f18 when pressed alone)",
            "manipulators": [
                <% modifiers = ["left_command", "left_control", "left_option", "left_shift"] %>
                <% modifiers.each_with_index do |modifier, index| %>
                    <% oth, *ers = modifiers - [modifier] %>
                    <% if index > 0 %>,<% end %>
                    {
                        "type": "basic",
                        "from": <%= from("caps_lock", [modifier], ["any"]) %>,
                        "to": <%= to([[oth, ers]]) %>,
                        "to_if_alone": <%= to([["f18", [modifier]]]) %>
                    }
                <% end %>
            ]
        }
    ]
}
